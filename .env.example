# =============================================================================
# Astrid Task Manager - Environment Variables
# =============================================================================
# Copy this file to .env.local and fill in your values
# NEVER commit .env.local to version control

# =============================================================================
# Database (Required)
# =============================================================================
# PostgreSQL connection string (pooler URL for runtime queries)
DATABASE_URL=postgresql://postgres:password@localhost:5432/astrid_dev

# Direct database connection (for migrations - bypasses connection pooler)
# For Neon: use the same URL but remove "-pooler" from the hostname
# Example: ep-xxx-pooler.aws.neon.tech â†’ ep-xxx.aws.neon.tech
DATABASE_URL_DIRECT=postgresql://postgres:password@localhost:5432/astrid_dev

# Production database (for deployment scripts)
# DATABASE_URL_PROD=postgresql://user:password@host-pooler/database?sslmode=require
# DATABASE_URL_DIRECT_PROD=postgresql://user:password@host/database?sslmode=require

# =============================================================================
# Authentication (Required)
# =============================================================================
# NextAuth.js configuration
# Generate a secret: openssl rand -base64 32
NEXTAUTH_SECRET=your-secret-key-at-least-32-characters-long

# Public URL for authentication callbacks
NEXT_AUTH_PUBLIC_URL=https://your-domain.com

# Google OAuth credentials
# Get these from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret

# =============================================================================
# Email (Required for email features)
# =============================================================================
# Resend API for sending emails
# Get your key from: https://resend.com/api-keys
RESEND_API_KEY=re_your_resend_api_key
FROM_EMAIL=noreply@your-domain.com

# =============================================================================
# Push Notifications (Optional)
# =============================================================================
# VAPID keys for web push notifications
# Generate with: npx web-push generate-vapid-keys
VAPID_PUBLIC_KEY=your-vapid-public-key
VAPID_PRIVATE_KEY=your-vapid-private-key
VAPID_SUBJECT=mailto:support@your-domain.com

# =============================================================================
# File Storage (Optional)
# =============================================================================
# Vercel Blob storage for attachments
# Get from: https://vercel.com/dashboard/stores
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_your_token

# =============================================================================
# AI Features (Optional)
# =============================================================================
# OpenAI API key for AI-generated list images
# Get from: https://platform.openai.com/api-keys
LIST_IMAGE_GEN_API_KEY=sk-your-openai-api-key

# =============================================================================
# AI Agent Worker API Keys (Add the ones you want to use)
# =============================================================================
# These enable the AI agents that can be assigned tasks in Astrid:
# - claude@astrid.cc uses ANTHROPIC_API_KEY
# - openai-codex@astrid.cc uses OPENAI_API_KEY
# - gemini@astrid.cc uses GEMINI_API_KEY

# Claude (claude@astrid.cc) - Best coding experience with Agent SDK
# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key

# OpenAI (openai-codex@astrid.cc) - GPT-4o with function calling
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key

# Google Gemini (gemini@astrid.cc) - Gemini 1.5 Pro with function calling
# Get from: https://aistudio.google.com/apikey
GEMINI_API_KEY=your-gemini-api-key

# Encryption key for storing user AI API keys securely
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=your-64-character-hex-encryption-key

# =============================================================================
# GitHub Integration (Optional)
# =============================================================================
# GitHub App credentials for repository integration
# Create a GitHub App at: https://github.com/settings/apps
GITHUB_APP_ID=your-github-app-id
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_WEBHOOK_SECRET=your-webhook-secret
GITHUB_TOKEN=your-personal-access-token

# GitHub App private key (RSA format, with \n for newlines)
# GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----\n"

# =============================================================================
# Redis Cache (Optional - recommended for production)
# =============================================================================
# Local Redis for development
REDIS_URL=redis://localhost:6379

# Upstash Redis for production (serverless)
# Get from: https://console.upstash.com/
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token

# =============================================================================
# Vercel Deployment (Optional)
# =============================================================================
# For CLI deployments
# Get from: https://vercel.com/account/tokens
VERCEL_TOKEN=your-vercel-token
VERCEL_API_TOKEN=your-vercel-api-token
# Git author for AI agent commits - must be a Vercel team member email
# This is used when AI agents make commits; Vercel requires the git author to have team access
VERCEL_GIT_EMAIL=your-email@example.com
VERCEL_GIT_NAME=Your Name

# =============================================================================
# iOS TestFlight (Optional - Simple Setup)
# =============================================================================
# Public TestFlight link for your iOS app
# Users can access this to get the latest beta build
# Find in App Store Connect: App > TestFlight > External Testing > Public Link
TESTFLIGHT_PUBLIC_LINK=https://testflight.apple.com/join/YOUR_CODE

# =============================================================================
# App Store Connect API (Optional - Advanced Setup)
# =============================================================================
# For richer iOS build info (Xcode Cloud status, build numbers, etc.)
# Create API key at: App Store Connect > Users and Access > Keys
# Download the .p8 file (only available once!)
ASC_KEY_ID=your-key-id
ASC_ISSUER_ID=your-issuer-id
ASC_APP_ID=your-app-id
# Private key - paste contents with \n for newlines:
# ASC_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIGT...rest of key...\n-----END PRIVATE KEY-----"

# =============================================================================
# Astrid OAuth (For AI Agent Worker)
# =============================================================================
# OAuth credentials for the AI agent worker to interact with Astrid
# Create at: https://astrid.cc/settings/api-access
ASTRID_OAUTH_CLIENT_ID=astrid_client_your_client_id
ASTRID_OAUTH_CLIENT_SECRET=your_client_secret
ASTRID_OAUTH_LIST_ID=your-list-uuid-here

# =============================================================================
# Analytics (Optional)
# =============================================================================
# PostHog analytics
# Get from: https://app.posthog.com/project/settings
NEXT_PUBLIC_POSTHOG_KEY=phc_your_posthog_key
NEXT_PUBLIC_POSTHOG_HOST=https://us.i.posthog.com
NEXT_PUBLIC_POSTHOG_PROJECT_ID=your-project-id

# =============================================================================
# Development
# =============================================================================
NODE_ENV=development
NEXT_PUBLIC_BASE_URL=http://localhost:3000
